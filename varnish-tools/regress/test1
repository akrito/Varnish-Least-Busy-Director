test "Preserve HTTP protocol version in PASS mode" {
    ticket 56;

    client c1 {
    }

    server s1 {
	data = "This is a test.";
    }

    accelerator a1 {
	backend = s1;
	vcl = "
sub vcl_recv {
    pass;
}
";
    }

    case c10_s10 {
	comment = "client 1.0, server 1.0";
	c1.protocol = "1.0";
	s1.protocol = "1.0";
	c1.request(a1, "http://www.example.com/");
	assert(c1.response.protocol == "1.0");
    }

    case c10_s11 {
	comment = "client 1.0, server 1.1";
	c1.protocol = "1.0";
	s1.protocol = "1.1";
	c1.request(a1, "http://www.example.com/");
	assert(c1.response.protocol == "1.0");
    }

    case c11_s10 {
	comment = "client 1.1, server 1.0";
	c1.protocol = "1.1";
	s1.protocol = "1.0";
	c1.request(a1, "http://www.example.com/");
	assert(c1.response.protocol == "1.1");
    }

    case c11_s11 {
	comment = "client 1.1, server 1.1";
	c1.protocol = "1.1";
	s1.protocol = "1.1";
	c1.request(a1, "http://www.example.com/");
	assert(c1.response.protocol == "1.1");
    }
}
