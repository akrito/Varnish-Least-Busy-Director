.\"
.\" $Id$
.\"
.Dd September 16, 2006
.Dt VARNISHHIST 1
.Os
.Sh NAME
.Nm varnishhist
.Nd Varnish request histogram
.Sh SYNOPSIS
.Nm
.Op Fl b
.Op Fl C
.Op Fl c
.Op Fl d
.Op Fl I Ar regex
.Op Fl i Ar tag
.Op Fl r Ar file
.Op Fl V
.Op Fl w Ar delay
.Op Fl X Ar regex
.Op Fl x Ar tag
.Sh DESCRIPTION
The
.Nm
utility reads
.Xr varnishd 1
shared memory logs and presents a continuously updated histogram
showing the distribution of requests by their processing time.
Hits are marked with a pipe character ("|"), and misses are marked
with a hash character ("#").
.Pp
The following options are available:
.Bl -tag -width Fl
.It Fl b
Include log entries which result from communication with a backend
server.
If neither
.Fl b
nor
.Fl c
is specified,
.Nm
acts as if they both were.
.It Fl C
Ignore case when matching regular expressions.
.It Fl c
Include log entries which result from communication with a client.
If neither
.Fl b
nor
.Fl c
is specified,
.Nm
acts as if they both were.
.It Fl d
Process old log entries on startup.
Normally,
.Nm
will only process entries which are written to the log after it
starts.
.It Fl I Ar regex
Include log entries which match the specified regular expression.
If neither
.Fl I
nor
.Fl i
is specified, all log entries are included.
.It Fl i Ar tag
Include log entries with the specified tag.
If neither
.Fl I
nor
.Fl i
is specified, all log entries are included.
.It Fl r Ar file
Read log entries from
.Ar file
instead of shared memory.
.It Fl V
Display the version number and exit.
.It Fl w Ar delay
Wait at least
.Ar delay
seconds between each update.
The default is 1.
.Ar file
instead of displaying them.
The file will be overwritten unless the
.Fl a
option was specified.
.It Fl X Ar regex
Exclude log entries which match the specified regular expression.
.It Fl x Ar tag
Exclude log entries with the specified tag.
.El
.Sh SEE ALSO
.Xr varnishd 1 ,
.Xr varnishlog 1 ,
.Xr varnishncsa 1 ,
.Xr varnishstat 1 ,
.Xr varnishtop 1
.Sh HISTORY
The
.Nm
utility was developed by
.An Poul-Henning Kamp Aq phk@freebsd.dk
in cooperation with Verdens Gang AS and Linpro AS.
