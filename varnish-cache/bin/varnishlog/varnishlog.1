.\"
.\" $Id$
.\"
.Dd July 11, 2006
.Dt VARNISHLOG 1
.Os
.Sh NAME
.Nm varnishlog
.Nd HTTP accelerator log watcher
.Sh SYNOPSIS
.Nm
.Op Fl a
.Op Fl b
.Op Fl C
.Op Fl c
.Op Fl d
.Op Fl I Ar regex
.Op Fl i Ar tag
.Op Fl o
.Op Fl r Ar file
.Op Fl V
.Op Fl w Ar file
.Op Fl X Ar regex
.Op Fl x Ar tag
.Sh DESCRIPTION
The
.Nm
utility reads and presents
.Xr varnishd 1
shared memory logs.
.Pp
The following options are available:
.Bl -tag -width Fl
.It Fl a
When writing to a file, append to it rather than overwrite it.
.It Fl b
Include log entries which result from communication with a backend
server.
If neither
.Fl b
nor
.Fl c
is specified,
.Nm
acts as if they both were.
.It Fl C
Ignore case when matching regular expressions.
.It Fl c
Include log entries which result from communication with a client.
If neither
.Fl b
nor
.Fl c
is specified,
.Nm
acts as if they both were.
.It Fl d
Process old log entries on startup.
Normally,
.Nm
will only process entries which are written to the log after it
starts.
.It Fl I Ar regex
Include log entries which match the specified regular expression.
If neither
.Fl I
nor
.Fl i
is specified, all log entries are included.
.It Fl i Ar tag
Include log entries with the specified tag.
If neither
.Fl I
nor
.Fl i
is specified, all log entries are included.
.It Fl o
Group log entries by request ID.
.It Fl r Ar file
Read log entries from
.Ar file
instead of shared memory.
.It Fl V
Display the version number and exit.
.It Fl w Ar file
Write log entries to
.Ar file
instead of displaying them.
The file will be overwritten unless the
.Fl a
option was specified.
.It Fl X Ar regex
Exclude log entries which match the specified regular expression.
.It Fl x Ar tag
Exclude log entries with the specified tag.
.El
.Sh TAGS
The following log entry tags are currently defined:
.\" keep in sync with include/shmlog_tags.h
.\" XXX add descriptions
.Bl -tag -width 16
.It Dv Backend
.It Dv BackendClose
.It Dv BackendOpen
.It Dv BackendReuse
.It Dv BackendXID
.It Dv CLI
.It Dv ClientAddr
.It Dv Debug
.It Dv Error
.It Dv ExpBan
.It Dv ExpKill
.It Dv ExpPick
.It Dv Hit
.It Dv HitPass
.It Dv HttpError
.It Dv HttpGarbage
.It Dv Length
.It Dv ObjHeader
.It Dv ObjLostHeader
.It Dv ObjProtocol
.It Dv ObjRequest
.It Dv ObjResponse
.It Dv ObjStatus
.It Dv ObjURL
.It Dv ReqEnd
.It Dv ReqStart
.It Dv RxHeader
.It Dv RxLostHeader
.It Dv RxProtocol
.It Dv RxRequest
.It Dv RxResponse
.It Dv RxStatus
.It Dv RxURL
.It Dv SessionClose
.It Dv SessionOpen
.It Dv StatAddr
.It Dv StatSess
.It Dv TTL
.It Dv TxHeader
.It Dv TxLostHeader
.It Dv TxProtocol
.It Dv TxRequest
.It Dv TxResponse
.It Dv TxStatus
.It Dv TxURL
.It Dv VCL_acl
.It Dv VCL_call
.It Dv VCL_return
.It Dv VCL_trace
.It Dv WorkThread
.El
.Sh SEE ALSO
.Xr varnishd 1 ,
.Xr varnishstat 1
.Sh HISTORY
The
.Nm
utility was developed by
.An Poul-Henning Kamp Aq phk@freebsd.dk
in cooperation with Verdens Gang AS and Linpro AS.
